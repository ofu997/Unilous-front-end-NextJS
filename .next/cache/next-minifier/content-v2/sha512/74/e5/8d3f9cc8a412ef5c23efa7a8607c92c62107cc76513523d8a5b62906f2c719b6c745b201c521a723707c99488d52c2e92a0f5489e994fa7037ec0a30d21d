{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{S6mx:function(t,e,n){\"use strict\";n.r(e);var o=n(\"ttZb\"),r=n(\"8Kt/\"),a=n.n(r),s=n(\"YFqc\"),i=n.n(s),c=n(\"nOHt\"),l=n(\"q1tI\"),u=n.n(l),d=n(\"/MKj\"),v=n(\"ANjH\"),f=n(\"5Yp1\"),m=n(\"VFWX\"),p=n(\"uYsV\"),h=n(\"2E1m\"),y=n(\"6Ysq\"),g=n(\"gH2n\"),w=n(\"BkJp\"),b=n(\"0J1E\"),C=n(\"beb+\"),S=n.n(C),N=u.a.createElement;function j(t){if(\"undefined\"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=function(t,e){if(!t)return;if(\"string\"===typeof t)return E(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);\"Object\"===n&&t.constructor&&(n=t.constructor.name);if(\"Map\"===n||\"Set\"===n)return Array.from(t);if(\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E(t,e)}(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var o,r,a=!0,s=!1;return{s:function(){o=t[Symbol.iterator]()},n:function(){var t=o.next();return a=t.done,t},e:function(t){s=!0,r=t},f:function(){try{a||null==o.return||o.return()}finally{if(s)throw r}}}}function E(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}var k=Object(c.withRouter)((function(t){var e=t.posts?t.posts.map((function(t){return t._id})):[],n=Object(l.useState)(!1),r=n[0],s=n[1],c=\"all\"===decodeURIComponent(t.router.query.searchQuery)?\"\":decodeURIComponent(t.router.query.searchQuery),u=Object(o.useQuery)(b.i,{variables:{filterString:c,postIds:e,eventQuery:t.eventSearch}});window.innerHeight+window.scrollY>document.body.offsetHeight-100&&!r&&s(!0),window.innerHeight+window.scrollY<=document.body.offsetHeight-100&&r&&s(!1);window.addEventListener(\"scroll\",(function(){window.innerHeight+window.scrollY>document.body.offsetHeight-100&&!r&&s(!0),window.innerHeight+window.scrollY<=document.body.offsetHeight-100&&r&&s(!1)}),!1);var d=function(t,e){if(!r)return!1;if(!t)return!1;if(!t.searchPosts)return!1;if(!e)return!0;var n,o=t.searchPosts.map((function(t){return t.title})),a=e.map((function(t){return t.title})),s=j(o);try{for(s.s();!(n=s.n()).done;){var i=n.value;if(!a.includes(i))return!0}}catch(c){s.e(c)}finally{s.f()}return!1}(u.data,t.posts)?u.data.searchPosts:null;if(Object(l.useEffect)((function(){d&&!t.posts&&(t.addPosts(u.data.searchPosts),s(!1)),d&&t.posts&&d.length>0&&(t.posts.map((function(t){return t._id})).includes(d[0]._id)||(t.addPosts(u.data.searchPosts),s(!1)))}),[u,t.addPosts,t,d]),!t.posts&&!u.data)return N(\"div\",null,N(\"div\",{style:{height:\"5vh\"}}),N(m.a,null));var v=t.eventSearch,h=function(){return\"COVID-19\"===v?[\"covid\",\"coronavirus\",\"outbreak\",\"virus\",\"emergency response\"]:\"2020 Election\"===v?[\"election\",\"democrat\",\"republican\",\"vote\"]:null},y=t.posts?t.posts.filter((function(t){return function(t){if(h()){var e,n=j(h());try{for(n.s();!(e=n.n()).done;){var o=e.value;if((t.description.toLowerCase().includes(o)||t.title.toLowerCase().includes(o))&&t.title.toLowerCase().includes(c.toLowerCase()))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}if(t.title.toLowerCase().includes(c.toLowerCase()))return!0;var r,a=j(t.skillNames);try{for(a.s();!(r=a.n()).done;){var s=r.value;if(c.includes(s))return!0}}catch(i){a.e(i)}finally{a.f()}return!1}(t)})):[],g=y?y.map((function(e){return N(p.a,{stretch:t.stretchLayout,key:\"post\".concat(e._id),post:e})})):[],C=(Object(w.a)(\"rgb(40,40,40)\").colorPallette,t.stretchLayout?S.a.layoutButtonGrid:S.a.layoutButtonStretch),E=t.stretchLayout?S.a.resultsContentStretch:S.a.resultsContentGrid,k=[{name:\"COVID-19\",color:\"rgb(237,32,40)\",iconB:\"/svg/events/virusB.svg\",iconW:\"/svg/events/virusW.svg\",iconC:\"/svg/events/virusC.svg\"},{name:\"2020 Election\",color:\"rgb(255,0,255)\",iconB:\"/svg/events/usaB.svg\",iconW:\"/svg/events/usaW.svg\",iconC:\"/svg/events/usaC.svg\"}].map((function(e){return e.name===t.eventSearch?N(\"div\",{className:S.a.eventSelected,onClick:function(){return t.setEventSearch(null)},style:{borderColor:e.color,backgroundColor:e.color},key:\"EV\".concat(e.name)},N(\"img\",{src:e.iconW,className:S.a.eventImage,alt:e.name}),N(\"h3\",{className:S.a.eventText},e.name)):N(\"div\",{className:S.a.event,onClick:function(){return t.setEventSearch(e.name)},style:{borderColor:e.color,color:e.color},key:\"EV\".concat(e.name)},N(\"img\",{src:e.iconC,className:S.a.eventImage,alt:e.name}),N(\"h3\",{className:S.a.eventText},e.name))})),B=t.eventSearch?S.a.ECActive:null,L=u.data&&null===u.data.searchPosts?N(\"h3\",{style:{opacity:\"0.8\"}},\"no more posts\"):N(m.a,null),P=y.map((function(t){return t.title})).join(\", \");return console.log(\"props.posts\"+t.posts),N(f.a,null,N(a.a,null,N(\"title\",null,\"Browse for projects in Unilous\"),N(\"meta\",{property:\"og:title\",content:\"Browse for projects in Unilous\",key:\"title\"}),N(\"meta\",{property:\"og:description\",content:\"Unilous projects: \".concat(P,\".\"),key:\"description\"}),N(\"meta\",{name:\"twitter:title\",content:\"Browse for projects in Unilous\",key:\"title\"}),N(\"meta\",{name:\"description\",content:\"Unilous projects: \".concat(P,\".\"),key:\"description\"})),N(\"div\",{className:\"home-wrapper\"},N(\"div\",{className:S.a.resultsContainer},N(i.a,{href:\"/PostFormPage\"},N(\"a\",{className:\"\".concat(S.a.formContainerExpand,\" standard-hover neutralize-link\"),title:\"add post\"},N(\"img\",{className:S.a.formExpandIcon,src:\"/svg/plusW.svg\",alt:\"team up\"}))),N(\"div\",{className:\"navbar-height\"}),N(\"h2\",{className:S.a.secondaryTitle},\"events\"),N(\"div\",{className:\"\".concat(S.a.eventsContainer,\" \").concat(B)},k),N(\"div\",{onClick:function(){return t.toggleStretchLayout(!t.stretchLayout)},className:S.a.layoutWrapper},N(\"div\",{className:S.a.layoutContainer},N(\"div\",{className:\"layoutButton \".concat(C)},N(\"div\",{className:S.a.layoutBox}),N(\"div\",{className:S.a.layoutBox}),N(\"div\",{className:S.a.layoutBox}),N(\"div\",{className:S.a.layoutBox})))),N(\"div\",null),N(\"div\",{className:\"resultsContent \".concat(E)},g),N(\"div\",{style:{position:\"relative\",height:\"400px\"}},L))))}));e.default=Object(d.b)((function(t){return{posts:t.posts,stretchLayout:t.stretchLayout,eventSearch:t.eventSearch}}),(function(t){return{addPosts:Object(v.b)(y.a,t),toggleStretchLayout:Object(v.b)(g.b,t),setEventSearch:Object(v.b)(h.b,t)}}))(k)},ST3h:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/results/[searchQuery]\",function(){return n(\"S6mx\")}])}},[[\"ST3h\",1,2,0,4,3,5,6,7,8,9,10]]]);","extractedComments":[]}